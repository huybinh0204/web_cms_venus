<% include ../index1.ejs %>
<head>
    <script>
        window.onload = function () {
        var a = Number("<%= baocao.totalCheckInNo %>");
        var b = Number("<%= baocao.totalNotCheckInNo %>");
            var chart = new CanvasJS.Chart("chartContainer", {
                theme: "light2",
                animationEnabled: true,
                title: {
                    text: "Biểu Đồ Phòng Ban"
                },
                subtitles: [{
                    text: "",
                    fontSize: 16
                }],
                data: [{
                    type: "pie",
                    indexLabelFontSize: 18,
                    radius: 80,
                    // indexLabel: "{label} - {y}",
                    // yValueFormatString: "###0.0\"%\"",
                    click: explodePie,
                    dataPoints: [
                        {y: a, label: "Ngày nghỉ"},
                        {y: b, label: "Ngày đi làm"},
                        // {y: 24.5, label: "Renewable"},
                        // {y: 9, label: "Coal"},
                        // {y: 3.1, label: "Other Fuels"}
                    ]
                }]
            });
            chart.render();

            function explodePie(e) {
                for (var i = 0; i < e.dataSeries.dataPoints.length; i++) {
                    if (i !== e.dataPointIndex)
                        e.dataSeries.dataPoints[i].exploded = false;
                }
            }

        }
    </script>
</head>
<!-- Page Heading -->
<h1 class="h3 mb-2 text-gray-800"><%= title %></h1>
<div>
</div>
<div class="card shadow mb-4">
    <div class="card-body">
        <div class="table-responsive">
            <div class="col-sm-12 mb-12 mb-sm-12">
                <form class="user" action="/admin/contacts/reportDepartment/"
                      method="post">
                    <div class="form-group row">
                        <div class="col-sm-3 mb-3 mb-sm-3">
                            <div class="form-group row">
                                <div class="col-sm-4 mb-4 mb-sm-4">
                                    <p>Thời gian :</p>
                                </div>
                                <div class="col-sm-8 mb-8 mb-sm-8">
                                    <input type="date" class="form-control" name="name"
                                           placeholder="Bộ phận">
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-sm-4 mb-4 mb-sm-4">
                                    <p>Bộ phận :</p>
                                </div>
                                <div class="col-sm-8 mb-8 mb-sm-8 p-10">
                                    <select data-placeholder="Choose a Country..."
                                            style="padding: 5px; border-color:#d0cece;border-radius: 5px"
                                            class="col-sm-12 mb-12 mb-sm-12" tabindex="1">
                                        <% questionk.forEach(function(item) { %>
                                            <option value="<%= item.name %>" label="<%= item.name %>"></option>
                                        <% }); %>

                                    </select>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-sm-4 mb-4 mb-sm-4"></div>
                                <div class="col-sm-8 mb-8 mb-sm-8">
                                    <button type="submit" class="btn btn-primary btn-user">Tìm kiếm</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-8 mb-8 mb-sm-8">
                            <div id="chartContainer" style="height: 370px; width: 100%;"></div>
                        </div>
                    </div>
                </form>

            </div>
            <div class="col-sm-12 mb-12 mb-sm-12">
                <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                    <thead>
                    <tr>
                        <th>Tên</th>
                        <th>Ngày nghỉ</th>
                        <th>Ngày đi làm</th>
                        <th>Hành động</th>
                    </tr>
                    </thead>
                    <tfoot>
                    <tr>
                        <th>Tên</th>
                        <th>Ngày nghỉ</th>
                        <th>Ngày đi làm</th>
                        <th>Hành động</th>
                    </tr>
                    </tfoot>
                    <tbody>
                    <% lstEmployee.forEach(function(item) { %>
                        <tr>
                            <td><%= item.employeeName %></td>
                            <td><%= item.checkInNo %></td>
                            <td><%= item.notCheckInNo %></td>
                            <td><a href="/admin/contacts/edit/<%= item.employeeId %>">
                                    <button type="button" class="btn btn-info  btn-user ">Chi tiết</button>
                                </a></form>
                            </td>
                        </tr>
                    <% }); %>
                    </tbody>
                </table>
            </div>
        </div>

    </div>
</div>
<!--<div id="chartContainer" style="height: 370px; width: 100%;">-->
<script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
<!--</div>-->
<% include ../index2.ejs %>
